name: Update-Deps
on:
  workflow_dispatch:
  push:
    branches:
      - update-deps-action

jobs:
  update-deps:
    runs-on: ubuntu-latest
    name: Update dependency
    steps:
      - name: Checkout
        uses: actions/checkout@v2      
      # - name: updating backend shared
      #   run: |
      #     git config user.name "GitHub Actions Bot"
      #     git config user.email "<>"
      #     cd backend && go get -u github.com/redhat-appstudio/managed-gitops/backend-shared
      #     cd .. && cd appstudio-controller && go get -u github.com/redhat-appstudio/managed-gitops/backend-shared
      #     go get -u go.uber.org/zap
      #     git add . && git commit -m "update backend" && git push origin update-deps-action
      #   cd .. && cd appstudio-controller && go get -u github.com/redhat-appstudio/managed-gitops/backend-shared
      # - name: push to branch
      #   with:
      #     token: ${{secrets.PAT}}
      #   run: git push 
      - name: Get latest commit id
        run: git rev-parse HEAD
      # - name: update db-migrate
      #   run: cd backend && go get -u github.com/redhat-appstudio/managed-gitops/backend-shared
      # - name: push to branch
      #   with:
      #     token: ${{secrets.PAT}}
      #   run: git push   